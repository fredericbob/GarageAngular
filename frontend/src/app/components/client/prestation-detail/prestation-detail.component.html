<div class="max-w-5xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-xl" *ngIf="prestation; else loading">
  <!-- Titre -->
  <h1 class="text-3xl font-bold text-gray-900 flex items-center space-x-2">
    üõ†Ô∏è <span>{{ prestation.nom }}</span>
  </h1>
  <p class="mt-2 text-gray-700 ml-6">{{ prestation.description }}</p>

  <!-- Section main d'≈ìuvre -->
  <div class="mt-10">
    <h2 class="text-2xl font-semibold text-gray-800">üíº Co√ªt de la main d'≈ìuvre</h2>
    <p class="text-gray-700 ml-6">Cette prestation comprend un co√ªt fixe de main d'≈ìuvre :
      <span class="font-bold">{{ prestation.prix_main_oeuvre }} Ar</span>
    </p>
  </div>

  <!-- Tableau des tarifs -->
  <div class="mt-10">
    <h2 class="text-2xl font-semibold text-gray-800 flex items-center space-x-2">
      üí∞ <span>D√©tails des tarifs par type de v√©hicule</span>
    </h2>

      <!-- Explication -->
    <div class="">
      <p class="text-gray-600 ml-6">
        Le tableau ci-dessous d√©taille les pi√®ces n√©cessaires pour chaque type de v√©hicule ainsi que leur co√ªt.
        Le prix total indiqu√© inclut la somme des pi√®ces list√©es + le co√ªt de la main d'≈ìuvre.
      </p>
    </div>

    <div class="overflow-x-auto mt-4">
      <table class="min-w-full bg-white border border-gray-200 shadow-md rounded-lg overflow-hidden">
        <!-- En-t√™te -->
        <thead>
          <tr class="bg-gray-100 text-gray-700 text-left">
            <th class="px-4 py-3 border">üöó Type de v√©hicule</th>
            <th class="px-4 py-3 border text-center">üßæ Prix des pi√®ces</th>
            <th class="px-4 py-3 border text-center">üíº Main d'≈ìuvre</th>
            <th class="px-4 py-3 border text-center">üíµ Prix total</th>
          </tr>
        </thead>

        <!-- Corps -->
        <tbody>
          <tr *ngFor="let vehicule of prestation.prix_par_vehicule" class="hover:bg-gray-50">
            <!-- Nom du v√©hicule -->
            <td class="px-4 py-3 border font-medium text-gray-900">{{ vehicule.vehicule }}</td>

            <!-- Somme des pi√®ces -->
            <td class="px-4 py-3 border text-center text-gray-800">
              {{
                getPrixPiecesTotal(vehicule.prixPieces)
              }} Ar
            </td>

            <!-- Main d'≈ìuvre -->
            <td class="px-4 py-3 border text-center text-gray-800 ">
              {{ prestation.prix_main_oeuvre }} Ar
            </td>

            <!-- Prix total -->
            <td class="px-4 py-3 border text-center text-lg font-bold text-green-600">
              {{ vehicule.prixTotal }} Ar
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Chargement -->
<ng-template #loading>
  <div class="flex justify-center items-center min-h-[200px]">
    <svg class="animate-spin h-8 w-8 text-blue-600" viewBox="0 0 24 24" fill="none">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
    </svg>
    <p class="ml-3 text-gray-500 text-lg">Chargement des donn√©es...</p>
  </div>
</ng-template>
